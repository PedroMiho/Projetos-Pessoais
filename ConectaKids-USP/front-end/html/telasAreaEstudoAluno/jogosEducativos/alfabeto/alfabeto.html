<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Aprenda as Letras ‚Äî ConectaKids</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  :root{
    --brand:#6d4c41;
    --dark:#3e2723;
    --bg:#fff8f5;
    --card:#f5f2f0;
    --success:#198754;
    --danger:#dc3545;
  }
  body {
    background: var(--bg);
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    color:#332a25;
    margin:0;
    min-height:100vh;
    display:flex;
    flex-direction:column;
  }
  main { flex:1; padding:2rem 1rem; max-width:1100px; margin:0 auto; }
  header, footer { background:var(--dark); color:white; padding:0.8rem 1rem; }
  header .brand { font-weight:700; color:#fff; text-decoration:none; }
  .game-wrap { background:transparent; }
  .panel {
    background:var(--card);
    border-radius:14px;
    padding:18px;
    box-shadow:0 6px 20px rgba(0,0,0,0.06);
  }
  .target {
    display:flex;
    align-items:center;
    gap:1rem;
    justify-content:center;
    margin-bottom:10px;
  }
  .letter-circle {
    width:110px;height:110px;border-radius:50%;
    background:linear-gradient(180deg,#fff 0%, #efe6e2 100%);
    border:6px solid var(--brand);
    display:flex;align-items:center;justify-content:center;
    font-size:48px;font-weight:800;color:var(--brand);
    box-shadow: 0 6px 16px rgba(109,76,65,0.12);
  }
  .play-speech { background:var(--brand); color:#fff; border:none; padding:8px 12px; border-radius:8px; }
  .description { text-align:center; color:#6b5b53; margin-bottom:12px; }
  .options { display:grid; grid-template-columns:repeat(2,1fr); gap:12px; }
  .opt {
    background:white; border-radius:12px; padding:12px; display:flex; gap:12px; align-items:center;
    border:2px solid transparent; cursor:pointer; transition:transform .14s, box-shadow .14s;
  }
  .opt:hover { transform:translateY(-6px); box-shadow:0 8px 20px rgba(0,0,0,0.08); }
  .emoji { font-size:40px; width:64px; height:64px; display:flex; align-items:center; justify-content:center; border-radius:10px; background:var(--card); }
  .word { font-weight:700; color:var(--dark); font-size:18px; }
  .sub { font-size:13px; color:#6b5b53; }
  .correct { border-color:var(--success) !important; box-shadow:0 6px 18px rgba(25,135,84,0.12); }
  .wrong { border-color:var(--danger) !important; opacity:0.7; }
  .controls { display:flex; gap:8px; justify-content:center; margin-top:14px; }
  .btn-primary, .btn-outline-primary { background:var(--brand); border-color:var(--brand); }
  .statusbar { display:flex; gap:12px; align-items:center; justify-content:space-between; margin-top:12px; }
  .progress { height:18px; border-radius:12px; overflow:hidden; background:#eee; }
  .progress > div { height:100%; background:linear-gradient(90deg,var(--brand),var(--dark)); transition:width .3s ease; }
  .score { font-weight:700; color:var(--dark); }
  .hint { color:#6b5b53; font-size:13px; }
  .kbd { background:#f3f2f1; border-radius:6px; padding:4px 6px; font-weight:700; margin-left:6px; display:inline-block; }
  @media (max-width:700px){
    .letter-circle { width:88px;height:88px;font-size:40px; }
    .options { grid-template-columns:1fr; }
  }
</style>
</head>
<body>
<header class="d-flex align-items-center">
  <div class="container d-flex align-items-center justify-content-between">
    <a class="brand" href="#">ConectaKids ‚Ä¢ Aprenda as Letras</a>
    <div class="text-white small">Dica: use teclas <span class="kbd">1</span>-<span class="kbd">4</span> para responder</div>
  </div>
</header>

<main>
  <div class="game-wrap">
    <div class="panel">
      <div class="target">
        <div class="letter-circle" id="targetLetter">A</div>
        <div>
          <div class="description">
            <div style="font-size:20px;font-weight:700;color:var(--brand)">Qual figura come√ßa com a letra:</div>
            <div style="font-size:14px;color:#6b5b53;margin-top:6px">Ou√ßa a pron√∫ncia e escolha a op√ß√£o correta</div>
          </div>
          <div style="display:flex;gap:8px;justify-content:center;align-items:center">
            <button id="btnSpeak" class="btn play-speech"><i class="bi bi-volume-up-fill"></i> Ouvir</button>
            <button id="btnNext" class="btn btn-outline-primary">Pr√≥xima</button>
          </div>
        </div>
      </div>

      <div class="options" id="optionsContainer" aria-live="polite">
        <!-- options injected here -->
      </div>

      <div class="controls">
        <button id="btnStart" class="btn btn-primary">Iniciar Jogo</button>
        <button id="btnReset" class="btn btn-outline-secondary">Reiniciar</button>
      </div>

      <div class="statusbar mt-3">
        <div class="d-flex align-items-center gap-3">
          <div class="score">Score: <span id="scoreValue">0</span></div>
          <div class="hint">Round: <span id="roundValue">0</span>/<span id="totalRounds">10</span></div>
        </div>
        <div style="flex:1; margin-left:14px;">
          <div class="progress" aria-hidden="true">
            <div id="progressBar" style="width:0%"></div>
          </div>
        </div>
      </div>

      <div class="mt-3 text-center hint">
        <span id="feedback" style="font-weight:700"></span>
      </div>
    </div>
  </div>
</main>

<footer class="text-center">
  <div class="container small">¬© 2025 ConectaKids ‚Äî Aprendizado l√∫dico</div>
</footer>

<script>
/* ======= Dados (palavras em portugu√™s) ======= */
const ITEMS = {
  A: [{w:"Abacaxi", e:"üçç"}, {w:"Abelha", e:"üêù"}, {w:"Amor", e:"‚ù§Ô∏è"}],
  B: [{w:"Bola", e:"‚öΩ"}, {w:"Bicicleta", e:"üö≤"}, {w:"Borboleta", e:"ü¶ã"}],
  C: [{w:"Casa", e:"üè†"}, {w:"Cavalo", e:"üê¥"}, {w:"Cora√ß√£o", e:"‚ù§Ô∏è"}],
  D: [{w:"Dado", e:"üé≤"}, {w:"Dinossauro", e:"ü¶ñ"}, {w:"Dente", e:"ü¶∑"}],
  E: [{w:"Elefante", e:"üêò"}, {w:"Estrela", e:"‚≠ê"}, {w:"Escova", e:"ü™•"}],
  F: [{w:"Flor", e:"üå∏"}, {w:"Foca", e:"ü¶≠"}, {w:"Flauta", e:"üé∂"}],
  G: [{w:"Gato", e:"üê±"}, {w:"Galo", e:"üêì"}, {w:"Garrafa", e:"üçæ"}],
  H: [{w:"Helic√≥ptero", e:"üöÅ"}, {w:"Hamb√∫rguer", e:"üçî"}, {w:"Hist√≥ria", e:"üìñ"}],
  I: [{w:"Ilha", e:"üèùÔ∏è"}, {w:"Igreja", e:"‚õ™"}, {w:"√çm√£", e:"üß≤"}],
  J: [{w:"Jacar√©", e:"üêä"}, {w:"Jarro", e:"üè∫"}, {w:"Jumento", e:"üê¥"}],
  K: [{w:"Kiwi", e:"ü•ù"}, {w:"Karaok√™", e:"üé§"}, {w:"Ketchup", e:"üçÖ"}],
  L: [{w:"Laranja", e:"üçä"}, {w:"Le√£o", e:"ü¶Å"}, {w:"Livro", e:"üìö"}],
  M: [{w:"Macaco", e:"üêí"}, {w:"Ma√ß√£", e:"üçé"}, {w:"Mar", e:"üåä"}],
  N: [{w:"Navio", e:"üö¢"}, {w:"Nuvem", e:"‚òÅÔ∏è"}, {w:"Noz", e:"üå∞"}],
  O: [{w:"Ovo", e:"ü•ö"}, {w:"Orelha", e:"üëÇ"}, {w:"√înibus", e:"üöå"}],
  P: [{w:"Pato", e:"ü¶Ü"}, {w:"Panda", e:"üêº"}, {w:"P√£o", e:"ü•ñ"}],
  Q: [{w:"Queijo", e:"üßÄ"}, {w:"Quilt", e:"üõèÔ∏è"}, {w:"Quase", e:"‚ùì"}],
  R: [{w:"Rato", e:"üêÄ"}, {w:"Rosa", e:"üåπ"}, {w:"Rel√≥gio", e:"‚åö"}],
  S: [{w:"Sol", e:"‚òÄÔ∏è"}, {w:"Sapo", e:"üê∏"}, {w:"Sapato", e:"üëü"}],
  T: [{w:"Tigre", e:"üêØ"}, {w:"Tartaruga", e:"üê¢"}, {w:"Trem", e:"üöÜ"}],
  U: [{w:"Urso", e:"üêª"}, {w:"Uva", e:"üçá"}, {w:"Unha", e:"üíÖ"}],
  V: [{w:"Vaso", e:"ü™¥"}, {w:"Vaca", e:"üêÑ"}, {w:"Vela", e:"üïØÔ∏è"}],
  W: [{w:"Waffle", e:"üßá"}, {w:"Web", e:"üåê"}, {w:"Walkman", e:"üéß"}],
  X: [{w:"X√≠cara", e:"‚òï"}, {w:"Xilofone", e:"üéº"}, {w:"Xale", e:"üß£"}],
  Y: [{w:"Yak", e:"üêÇ"}, {w:"YinYang", e:"‚òØÔ∏è"}, {w:"Yogurte", e:"ü•£"}],
  Z: [{w:"Zebra", e:"ü¶ì"}, {w:"Z√≠per", e:"üß∑"}, {w:"Zangado", e:"üò†"}]
};

/* ======= Configura√ß√µes ======= */
const TOTAL_ROUNDS = 10; // rounds por jogo

/* ======= Elementos ======= */
const targetLetterEl = document.getElementById('targetLetter');
const optionsContainer = document.getElementById('optionsContainer');
const btnSpeak = document.getElementById('btnSpeak');
const btnStart = document.getElementById('btnStart');
const btnNext = document.getElementById('btnNext');
const btnReset = document.getElementById('btnReset');
const scoreValue = document.getElementById('scoreValue');
const roundValue = document.getElementById('roundValue');
const totalRoundsEl = document.getElementById('totalRounds');
const progressBar = document.getElementById('progressBar');
const feedback = document.getElementById('feedback');

totalRoundsEl.textContent = TOTAL_ROUNDS;

/* ======= Estado do jogo ======= */
let score = 0;
let round = 0;
let current = null; // {letter, correctItem, options: [{w,e,isCorrect}...] }
let isPlaying = false;
let lastLetters = [];

/* ======= Utilit√°rios ======= */
function randomChoice(arr){ return arr[Math.floor(Math.random()*arr.length)]; }
function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]];} return arr; }
function speak(text){ 
  try {
    const utter = new SpeechSynthesisUtterance(text);
    utter.lang = 'pt-BR';
    speechSynthesis.cancel();
    speechSynthesis.speak(utter);
  } catch(e){ console.log('TTS n√£o dispon√≠vel', e); }
}

/* ======= Monta uma rodada ======= */
function buildRound(){
  // pick a letter not recently used
  const letters = Object.keys(ITEMS).filter(l => !lastLetters.includes(l));
  let letter = randomChoice(letters.length ? letters : Object.keys(ITEMS));
  lastLetters.push(letter);
  if(lastLetters.length > 6) lastLetters.shift();

  // correct item
  const correct = randomChoice(ITEMS[letter]);

  // build 3 distractors from other letters
  const distractors = [];
  const allLetters = Object.keys(ITEMS).filter(l=>l!==letter);
  while(distractors.length < 3){
    const l = randomChoice(allLetters);
    const candidate = randomChoice(ITEMS[l]);
    // ensure not duplicate words
    if(!distractors.some(d => d.w === candidate.w) && candidate.w !== correct.w){
      distractors.push(candidate);
    }
  }

  // assemble options and shuffle
  const options = shuffle([{...correct, isCorrect:true}, ...distractors.map(d=>({...d, isCorrect:false}))]);

  current = { letter, correctItem: correct, options };
  renderRound();
}

/* ======= Render ======= */
function renderRound(){
  if(!current) return;
  targetLetterEl.textContent = current.letter;
  optionsContainer.innerHTML = '';
  feedback.textContent = '';

  current.options.forEach((opt, idx) => {
    const btn = document.createElement('button');
    btn.className = 'opt';
    btn.setAttribute('data-index', idx);
    btn.setAttribute('aria-label', (idx+1) + '. ' + opt.w);
    btn.innerHTML = `
      <div class="emoji" aria-hidden="true">${opt.e}</div>
      <div>
        <div class="word">${opt.w}</div>
        <div class="sub">Pressione <span class="kbd">${idx+1}</span></div>
      </div>
    `;
    btn.addEventListener('click', ()=> selectOption(idx, btn));
    optionsContainer.appendChild(btn);
  });

  // auto-speak letter for user
  setTimeout(()=> speak(`${current.letter}. ${current.correctItem.w}`), 400);
}

/* ======= A√ß√£o ao escolher op√ß√£o ======= */
function selectOption(index, dom){
  if(!isPlaying) return;
  const opt = current.options[index];
  const optionButtons = Array.from(optionsContainer.children);
  // disable further clicks
  isPlaying = false;

  if(opt.isCorrect){
    score++;
    dom.classList.add('correct');
    feedback.textContent = 'Muito bem! ‚úîÔ∏è';
    speak('Correto! ' + opt.w);
  } else {
    dom.classList.add('wrong');
    // highlight correct
    const correctIndex = current.options.findIndex(o=>o.isCorrect);
    optionButtons[correctIndex].classList.add('correct');
    feedback.textContent = 'Ops! A resposta correta √©: ' + current.correctItem.w;
    speak('Resposta incorreta. A correta √© ' + current.correctItem.w);
  }

  // update UI
  scoreValue.textContent = score;
  round++;
  roundValue.textContent = round;
  progressBar.style.width = `${(round/TOTAL_ROUNDS)*100}%`;

  // after short delay, if rounds remaining, allow next
  setTimeout(()=>{
    if(round >= TOTAL_ROUNDS){
      endGame();
    } else {
      // enable next button
      btnNext.disabled = false;
    }
  }, 900);
}

/* ======= Game controls ======= */
function startGame(){
  score = 0; round = 0;
  scoreValue.textContent = 0;
  roundValue.textContent = 0;
  progressBar.style.width = '0%';
  isPlaying = true;
  btnStart.disabled = true;
  btnReset.disabled = false;
  btnNext.disabled = true;
  buildRound();
}

function nextRound(){
  btnNext.disabled = true;
  isPlaying = true;
  buildRound();
}

function resetGame(){
  score = 0; round = 0; current = null;
  scoreValue.textContent = 0;
  roundValue.textContent = 0;
  progressBar.style.width = '0%';
  optionsContainer.innerHTML = '';
  targetLetterEl.textContent = '-';
  feedback.textContent = '';
  isPlaying = false;
  btnStart.disabled = false;
  btnReset.disabled = true;
  btnNext.disabled = true;
  speechSynthesis.cancel();
}

function endGame(){
  isPlaying = false;
  btnStart.disabled = false;
  btnNext.disabled = true;
  feedback.textContent = `Jogo finalizado! Sua pontua√ß√£o: ${score} / ${TOTAL_ROUNDS}`;
  speak(`Parab√©ns! Voc√™ fez ${score} de ${TOTAL_ROUNDS}`);
  // optionally persist best score in localStorage
  try {
    const best = parseInt(localStorage.getItem('ck_bestScore') || '0', 10);
    if(score > best) {
      localStorage.setItem('ck_bestScore', score);
      feedback.textContent += ' ‚Ä¢ Novo recorde!';
    }
  } catch(e){ /* ignore */ }
}

/* ======= Eventos UI ======= */
btnStart.addEventListener('click', ()=> {
  startGame();
});
btnNext.addEventListener('click', ()=> {
  nextRound();
});
btnReset.addEventListener('click', ()=> {
  if(confirm('Reiniciar o jogo?')) resetGame();
});
btnSpeak.addEventListener('click', ()=> {
  if(current) speak(`${current.letter}. ${current.correctItem.w}`);
});

/* teclado 1-4 para selecionar */
document.addEventListener('keydown', (ev) => {
  if(!current || !isPlaying) return;
  const key = ev.key;
  if(['1','2','3','4'].includes(key)){
    const idx = parseInt(key,10) - 1;
    const btn = optionsContainer.children[idx];
    if(btn) btn.click();
  }
});

/* acessibilidade: permitir foco e Enter key on options (delegation) */
optionsContainer.addEventListener('keydown', (e) => {
  if(e.key === 'Enter' && e.target.matches('.opt')){
    e.target.click();
  }
});

/* iniciar com estado limpo */
resetGame();

/* mostrar best score se existir */
window.addEventListener('load', () => {
  try {
    const best = localStorage.getItem('ck_bestScore');
    if(best) {
      const el = document.createElement('div');
      el.style.fontSize = '13px';
      el.style.color = '#6b5b53';
      el.style.textAlign = 'center';
      el.style.marginTop = '8px';
      el.textContent = `Recorde: ${best} pontos`;
      document.querySelector('.panel').appendChild(el);
    }
  } catch(e){}
});
</script>
</body>
</html>
