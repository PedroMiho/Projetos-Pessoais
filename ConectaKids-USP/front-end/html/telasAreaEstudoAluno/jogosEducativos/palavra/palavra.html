<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Monte a Palavra - ConectaKids</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  :root{
    --brand:#6d4c41;
    --dark:#3e2723;
    --bg:#fff8f5;
    --card:#f5f2f0;
    --success:#2e7d32;
    --danger:#c62828;
  }
  body{
    background:var(--bg);
    color:var(--dark);
    font-family:system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
    min-height:100vh;
    display:flex;
    flex-direction:column;
  }
  header, footer{background:var(--dark);color:white;padding:0.8rem 1rem;}
  header a{color:white;text-decoration:none;font-weight:700;}
  main{flex:1;padding:2rem 1rem;max-width:900px;margin:auto;}
  .card-game{background:var(--card);border-radius:16px;box-shadow:0 6px 16px rgba(0,0,0,0.1);padding:2rem;text-align:center;}
  .image{font-size:80px;margin-bottom:20px;}
  .slots{display:flex;justify-content:center;gap:8px;margin-bottom:16px;flex-wrap:wrap;}
  .slot{
    width:50px;height:60px;border:2px dashed var(--brand);
    border-radius:8px;font-size:28px;display:flex;align-items:center;justify-content:center;
    position: relative;
    background:#fff;transition:.2s;
  }
  .remove-letter{
    position:absolute;
    top:0px;
    right:0px;
    font-size:16px;
    font-weight:bold;
    color:var(--danger);
    cursor:pointer;
    padding:2px 4px;
  }
  .letters{display:flex;justify-content:center;gap:10px;flex-wrap:wrap;}
  .letter-btn{
    background:white;border:2px solid var(--brand);border-radius:8px;padding:10px 18px;
    font-size:22px;font-weight:700;color:var(--brand);cursor:pointer;
    transition:.2s;box-shadow:0 3px 8px rgba(0,0,0,0.08);
  }
  .letter-btn:hover{background:var(--brand);color:white;transform:translateY(-3px);}
  .correct{background:var(--success)!important;color:white!important;}
  .wrong{background:var(--danger)!important;color:white!important;}
  .score{text-align:center;margin-top:15px;font-weight:700;color:var(--dark);display:flex;flex-direction:column;align-items:center;gap:5px;}
  .btn-primary{background:var(--brand);border:none;}
</style>
</head>
<body>

<header>
  <div class="container d-flex justify-content-between align-items-center">
    <a href="#">ConectaKids</a>
    <span class="small">Monte a Palavra</span>
  </div>
</header>

<main>
  <div class="card-game">
    <div class="image" id="emoji">üçé</div>
    <h4 class="mb-3" id="instrucao">Monte a palavra:</h4>
    <div class="slots" id="slots"></div>
    <div class="letters" id="letters"></div>
    <div class="score" id="mensagem"></div>
    <div class="mt-4 d-flex justify-content-center gap-2">
      <button class="btn btn-primary" id="btnNext">Pr√≥xima Palavra</button>
      <button class="btn btn-outline-secondary" id="btnReset">Reiniciar</button>
    </div>
  </div>
</main>

<footer class="text-center small py-2">¬© 2025 ConectaKids - Aprendizado l√∫dico</footer>

<script>
// ===== PALAVRAS DO JOGO =====
const palavras = [
  { palavra: "GATO", emoji: "üê±" },
  { palavra: "SOL", emoji: "‚òÄÔ∏è" },
  { palavra: "CASA", emoji: "üè†" },
  { palavra: "PEIXE", emoji: "üêü" },
  { palavra: "FLOR", emoji: "üå∏" },
  { palavra: "BOLA", emoji: "‚öΩ" },
  { palavra: "LUA", emoji: "üåô" },
  { palavra: "SAPO", emoji: "üê∏" },
  { palavra: "FADA", emoji: "üßö‚Äç‚ôÄÔ∏è" },
  { palavra: "CARRO", emoji: "üöó" }
];

let indice = 0;
let resposta = [];
let palavraAtual = palavras[indice];

// ===== ELEMENTOS =====
const emojiEl = document.getElementById('emoji');
const slotsEl = document.getElementById('slots');
const lettersEl = document.getElementById('letters');
const mensagemEl = document.getElementById('mensagem');
const btnNext = document.getElementById('btnNext');
const btnReset = document.getElementById('btnReset');

// ===== FUN√á√ÉO PARA FALAR =====
function falar(texto) {
  const utter = new SpeechSynthesisUtterance(texto);
  utter.lang = "pt-BR";
  speechSynthesis.cancel();
  speechSynthesis.speak(utter);
}

// ===== EMBARALHAR LETRAS =====
function embaralhar(array) {
  return array.sort(() => Math.random() - 0.5);
}

// ===== INICIAR JOGO =====
function iniciarRodada() {
  const { palavra, emoji } = palavraAtual;
  resposta = [];
  emojiEl.textContent = emoji;
  mensagemEl.textContent = "";
  slotsEl.innerHTML = "";
  lettersEl.innerHTML = "";

  // Cria os espa√ßos da palavra
  for (let i = 0; i < palavra.length; i++) {
    const div = document.createElement('div');
    div.classList.add('slot');
    slotsEl.appendChild(div);
  }

  // Cria as letras embaralhadas
  const letras = embaralhar(palavra.split(''));
  letras.forEach(letra => {
    const btn = document.createElement('button');
    btn.textContent = letra;
    btn.classList.add('letter-btn');
    btn.addEventListener('click', () => selecionarLetra(btn, letra));
    lettersEl.appendChild(btn);
  });
}

// ===== SELECIONAR LETRA =====
function selecionarLetra(btn, letra) {
  const slots = document.querySelectorAll('.slot');
  const index = resposta.length;

  if (index < slots.length) {
    resposta.push({letra, indexBtn: btn});
    
    // Adiciona letra ao slot
    const slot = slots[index];
    slot.textContent = letra;

    // Adiciona bot√£o "X" no slot
    const removeBtn = document.createElement('span');
    removeBtn.textContent = "√ó";
    removeBtn.className = "remove-letter";
    removeBtn.addEventListener('click', () => {
      removerLetra(index);
    });
    slot.appendChild(removeBtn);

    btn.disabled = true;
    btn.style.opacity = "0.5";

    if (resposta.length === palavraAtual.palavra.length) {
      verificarResposta();
    }
  }
}

// ===== REMOVER LETRA =====
function removerLetra(slotIndex) {
  const slots = document.querySelectorAll('.slot');
  const letraObjIndex = resposta.findIndex(r => r.indexBtn === slots[slotIndex].querySelector('.remove-letter').parentNode.querySelector('span') || true);
  const letraObj = resposta[slotIndex];
  if (!letraObj) return;

  // Habilita o bot√£o correspondente
  letraObj.indexBtn.disabled = false;
  letraObj.indexBtn.style.opacity = "1";

  // Remove do slot e da resposta
  slots[slotIndex].textContent = '';
  resposta.splice(slotIndex, 1);

  // Recria os X nos slots restantes
  slots.forEach((slot, i) => {
    slot.textContent = resposta[i] ? resposta[i].letra : '';
    if (resposta[i]) {
      const removeBtn = document.createElement('span');
      removeBtn.textContent = "√ó";
      removeBtn.className = "remove-letter";
      removeBtn.addEventListener('click', () => removerLetra(i));
      slot.appendChild(removeBtn);
    }
  });
}

// ===== VERIFICAR RESPOSTA =====
function verificarResposta() {
  const palavraFormada = resposta.map(r => r.letra).join('');
  const correta = palavraFormada === palavraAtual.palavra;

  if (correta) {
    mensagemEl.textContent = "Parab√©ns! Voc√™ acertou! üéâ";
    mensagemEl.style.color = "#2e7d32";
    falar("Parab√©ns! A palavra √© " + palavraAtual.palavra);
    document.querySelectorAll('.slot').forEach(s => s.classList.add('correct'));
  } else {
    mensagemEl.textContent = "Ops! Tente novamente! üòÖ";
    mensagemEl.style.color = "#c62828";
    falar("Ops! Tente novamente");

    // Marca os slots errados
    const slots = document.querySelectorAll('.slot');
    slots.forEach((s, i) => {
      const letra = resposta[i] ? resposta[i].letra : '';
      if (letra !== palavraAtual.palavra[i]) {
        s.classList.add('wrong');
      } else {
        s.classList.remove('wrong');
      }
    });
  }
}

// ===== PR√ìXIMA PALAVRA =====
btnNext.addEventListener('click', () => {
  indice++;
  if (indice >= palavras.length) {
    mensagemEl.textContent = "Fim do jogo! Voc√™ completou todas as palavras! ü•≥";
    falar("Parab√©ns! Voc√™ completou todas as palavras!");
    indice = 0;
  }
  palavraAtual = palavras[indice];
  iniciarRodada();
});

// ===== REINICIAR =====
btnReset.addEventListener('click', () => {
  indice = 0;
  palavraAtual = palavras[indice];
  iniciarRodada();
  mensagemEl.textContent = "";
  falar("O jogo foi reiniciado");
});

// ===== IN√çCIO =====
iniciarRodada();
</script>

</body>
</html>
