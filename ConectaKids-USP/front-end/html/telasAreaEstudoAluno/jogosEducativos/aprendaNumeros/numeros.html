<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aprenda N√∫meros (Corrigido)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #fff8f5;
      font-family: 'Nunito', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      text-align: center;
      padding: 24px;
    }
    h1 { color: #6d4c41; margin-top: 18px; font-weight: 800; }
    .word {
      font-size: 1.8rem;
      color: #3e2723;
      margin: 24px auto;
      background: #f5f2f0;
      display: inline-block;
      padding: 12px 28px;
      border-radius: 12px;
      font-weight: 700;
    }
    .number-grid {
      display: flex;
      gap: 18px;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 18px;
    }
    .number {
      width: 96px;
      height: 96px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background-color: #f3dcb0;
      color: #3e2723;
      font-size: 2.2rem;
      font-weight: 800;
      border-radius: 12px;
      cursor: pointer;
      user-select: none;
      transition: transform .14s ease, box-shadow .14s ease;
      box-shadow: 0 6px 12px rgba(0,0,0,0.05);
    }
    .number:hover { transform: translateY(-4px); box-shadow: 0 12px 20px rgba(0,0,0,0.08); }
    .feedback {
      margin-top: 18px;
      font-size: 1.25rem;
      font-weight: 700;
      min-height: 36px;
    }
    .btn-next {
      margin-top: 12px;
      background-color: #6d4c41;
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 10px;
      font-weight: 700;
    }
    .btn-next:focus { outline: none; box-shadow: 0 0 0 3px rgba(109,76,65,0.18); }
  </style>
</head>
<body>
  <div class="container">
    <h1>üî¢ Aprenda N√∫meros</h1>
    <p class="text-muted">Informe o n√∫meros de melancias que aparecem na tela</p>

    <div class="word" id="word">‚Äî</div>

    <div class="number-grid" id="numberGrid" aria-live="polite" role="list"></div>

    <div class="feedback" id="feedback" aria-live="polite"></div>

    <button id="nextBtn" class="btn-next" style="display:none">Pr√≥xima</button>
  </div>

  <script>
    const numbers = [
      { num: 1, word: "üçâ" },
      { num: 2, word: "üçâüçâ" },
      { num: 3, word: "üçâüçâüçâ" },
      { num: 4, word: "üçâüçâüçâ üçâ" },
      { num: 5, word: "üçâüçâüçâ üçâüçâ" },
      { num: 6, word: "üçâüçâüçâ üçâüçâüçâ" },
      { num: 7, word: "üçâüçâüçâ üçâüçâüçâ üçâ" },
      { num: 8, word: "üçâüçâüçâ üçâüçâüçâ üçâüçâ" },
      { num: 9, word: "üçâüçâüçâ üçâüçâüçâ üçâüçâüçâ" },
      { num: 10, word: "üçâüçâüçâ üçâüçâüçâ üçâüçâüçâ üçâ" }
    ];

    const wordDisplay = document.getElementById('word');
    const numberGrid = document.getElementById('numberGrid');
    const feedback = document.getElementById('feedback');
    const nextBtn = document.getElementById('nextBtn');

    let correctNumber = null;

    function sampleOtherNumbers(correct, k=4) {
      // retorna k n√∫meros √∫nicos diferentes de `correct`
      const pool = numbers.filter(n => n.num !== correct).map(n => n.num);
      const picked = [];
      while (picked.length < k && pool.length > 0) {
        const idx = Math.floor(Math.random() * pool.length);
        picked.push(pool.splice(idx,1)[0]);
      }
      return picked;
    }

    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function newRound() {
      feedback.textContent = '';
      feedback.style.color = '#333';
      nextBtn.style.display = 'none';

      // escolhe n√∫mero correto
      const choice = numbers[Math.floor(Math.random() * numbers.length)];
      correctNumber = choice.num;

      // monta op√ß√µes: inclui o correto + 4 distractors
      const distractors = sampleOtherNumbers(correctNumber, 4);
      const options = shuffle([correctNumber, ...distractors]);

      // exibe palavra
      wordDisplay.textContent = choice.word;

      // renderiza bot√µes
      numberGrid.innerHTML = '';
      options.forEach(n => {
        const btn = document.createElement('button');
        btn.className = 'number';
        btn.type = 'button';
        btn.setAttribute('aria-label', 'N√∫mero ' + n);
        btn.textContent = n;
        btn.onclick = () => checkAnswer(n, btn);
        numberGrid.appendChild(btn);
      });
    }

    function checkAnswer(selected, btn) {
      // desabilita escolhas ap√≥s acerto
      if (selected === correctNumber) {
        feedback.textContent = 'üéâ Parab√©ns! Voc√™ acertou!';
        feedback.style.color = 'green';
        // marca bot√£o acertado
        btn.style.boxShadow = '0 6px 18px rgba(0,128,0,0.12)';
        btn.style.transform = 'scale(1.04)';
        // revela pr√≥ximo
        nextBtn.style.display = 'inline-block';
        // desabilita todos os bot√µes para evitar m√∫ltiplos cliques
        Array.from(numberGrid.children).forEach(b => b.disabled = true);
      } else {
        feedback.textContent = '‚ùå Tente novamente!';
        feedback.style.color = 'crimson';
        // pequena anima√ß√£o de erro
        btn.animate([{ transform: 'translateY(0)' }, { transform: 'translateY(-6px)' }, { transform: 'translateY(0)' }], { duration: 160 });
      }
    }

    nextBtn.addEventListener('click', newRound);

    // primeira rodada
    newRound();
  </script>
</body>
</html>
